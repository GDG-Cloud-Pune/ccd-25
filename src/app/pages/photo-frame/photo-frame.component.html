<div class="container">
  <h3 class="subtitle">Personalize Your #CCDPUNE25 Badge</h3>

  <div class="steps-container">
    <div class="step">
      <div class="step-number">1</div>
      <div class="step-text">Upload photo</div>
      <div class="step-number">2</div>
      <div class="step-text">Adjust position</div>
      <div class="step-number">3</div>
      <div class="step-text">Download or share</div>
    </div>
  </div>

  <div class="frame-container" #frameContainer>
    <div class="placeholder" #placeholder [style.display]="showUserImage ? 'none' : 'flex'">
      <p>Click "Upload Photo" to get started</p>
    </div>

    <img #userImage class="user-image" [style.display]="showUserImage ? 'block' : 'none'"
      (mousedown)="onMouseDown($event)" (touchstart)="onTouchStart($event)" (touchmove)="onTouchMove($event)"
      (touchend)="onTouchEnd()" />

    <img src="assets/frames/frame-template.svg" class="frame" alt="Cloud Community Days Frame" />
  </div>

  <div class="controls">
    <label for="imageUpload" class="btn btn-primary" [style.display]="showUploadLabel ? 'inline-flex' : 'none'">
      <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="17 8 12 3 7 8"></polyline>
        <line x1="12" y1="3" x2="12" y2="15"></line>
      </svg>
      Upload Photo
    </label>

    <input type="file" id="imageUpload" #imageUpload accept="image/*" (change)="onImageUpload($event)" />

    <button class="btn btn-warning" [style.display]="showClearImage ? 'inline-flex' : 'none'" (click)="onClearImage()">
      <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M3 6h18"></path>
        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
        <path d="M10 11v6"></path>
        <path d="M14 11v6"></path>
        <path d="M6 6l2 12h8l2-12"></path>
      </svg>
      Clear Image
    </button>
  </div>

  <div class="usage-tip" [style.display]="showUsageTip ? 'block' : 'none'">
    ðŸ’¡ <strong>Tip:</strong> Drag your photo horizontally to reposition it!
  </div>

  <div class="controls" [style.display]="showDownloadControls ? 'flex' : 'none'">
    <button class="btn btn-success" (click)="onDownload()">
      <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="7 10 12 15 17 10"></polyline>
        <line x1="12" y1="15" x2="12" y2="3"></line>
      </svg>
      Download
    </button>
  </div>

  <div class="share-container" [style.display]="showShareContainer ? 'flex' : 'none'">
    <div class="share-title">Share your #CCDPUNE25 frame:</div>

    <div class="share-options">
      <button class="btn btn-x" (click)="onShareX()">
        <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z">
          </path>
        </svg>
      </button>

      <button class="btn btn-linkedin" (click)="onShareLinkedIn()">
        <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.853-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z">
          </path>
        </svg>
      </button>
    </div>
  </div>
</div>